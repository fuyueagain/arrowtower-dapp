# ArrowTower dApp é¡¹ç›®æ–¹æ¡ˆä¹¦ â€” v1.3

**é¡¹ç›®åç§°ï¼š** ArrowTower dApp  
**ç‰ˆæœ¬ï¼š** v1.3beta  
**æ—¥æœŸï¼š** 2025å¹´10æœˆ  
**ç›®æ ‡ï¼š** Dot Your Future: Create, Connect, Transform â€” Hackathon / MVP ä¸å·¥ç¨‹åŒ–äº¤ä»˜å‚è€ƒ

---

## ä¸€ã€é¡¹ç›®æ€»è§ˆ

### 1.1 é¡¹ç›®èƒŒæ™¯

**ç®­å¡”æ‘ä¹¡æ‘æ—…æ¸¸èµ„æº**

ç®­å¡”æ‘ä½äºå››å·çœæˆéƒ½å¸‚è’²æ±Ÿå¿ï¼Œè·æˆéƒ½å¸‚åŒºçº¦90å…¬é‡Œï¼Œä¸é›…å®‰å¸‚åå±±åŒºä»…ä¸€å±±ä¹‹éš”ã€‚æ‘è½éšåŒ¿åœ¨èµ·ä¼çš„æµ…ä¸˜å’Œè‘±èŒçš„æ—ç›˜ä¸­ï¼Œå‘ˆç°å‡ºå…¸å‹çš„å·è¥¿ç”°å›­é£å…‰ã€‚å››å‘¨æ•£å¸ƒç€é’ç»¿çš„èŒ¶å›­å’ŒæŒ‚æ»¡ç´¯ç´¯æœå®çš„çŒ•çŒ´æ¡ƒå›­ï¼Œæ‘è¾¹ç«¹æ—æ©æ˜ ï¼Œæ¸…æ¾ˆæºªæµç¼“ç¼“æµæ·Œï¼Œä¿æŒç€çº¯æ­£æµ“éƒçš„å·è¥¿ç”°å›­é£æƒ…ã€‚æ‘å†…æ‹¥æœ‰å¤ç®­å¡”ã€ç”Ÿæ€æœå›­ã€ä¼ ç»Ÿæ°‘å±…ç­‰ä¸°å¯Œçš„æ–‡åŒ–å’Œè‡ªç„¶æ—…æ¸¸èµ„æºï¼Œå…·æœ‰è¾ƒå¤§çš„æ•°å­—åŒ–å‡çº§æ½œåŠ›ã€‚

### 1.2 é¡¹ç›®ç®€ä»‹
ArrowTower dApp æ˜¯ä¸€æ¬¾é¢å‘**Web3 æ–°æ‰‹è®¿å®¢**çš„å¤šåœºæ™¯ç­¾åˆ°æ‰“å¡å¹³å°ï¼Œé¦–æœŸè½åœ°ç®­å¡”æ‘ä¹¡æ‘æ—…æ¸¸åœºæ™¯ã€‚é€šè¿‡"çº¿ä¸‹æ¢ç´¢ + é“¾ä¸Šæ¿€åŠ±"çš„åˆ›æ–°æ¨¡å¼ï¼Œä¸ºç”¨æˆ·æä¾›é›¶é—¨æ§›çš„ Web3 ä½“éªŒã€‚

### 1.3 æ ¸å¿ƒä»·å€¼ä¸»å¼ 
- **é›¶ Gas è´¹ä½“éªŒ**ï¼šç”¨æˆ·æ— éœ€äº†è§£åŠ å¯†è´§å¸å³å¯è·å¾— NFT
- **å¤šåœºæ™¯é€‚ç”¨**ï¼šæ¡†æ¶åŒ–è®¾è®¡æ”¯æŒæ–‡æ—…ã€ä¼šå±•ã€æ•™è‚²ç­‰å¤šç§åœºæ™¯
- **çœŸå®ä»·å€¼è¯æ˜**ï¼šé“¾ä¸Šè®°å½•çº¿ä¸‹ä½“éªŒï¼Œåˆ›é€ æ°¸ä¹…æ•°å­—çºªå¿µå“
- **æ¸è¿›å¼ Web3 æ•™è‚²**ï¼šé€šè¿‡å®è·µå¼•å¯¼ç”¨æˆ·äº†è§£é’±åŒ…ã€ç­¾åã€NFT ç­‰æ¦‚å¿µ

### 1.4 æ ¸å¿ƒä¸šåŠ¡æµç¨‹
```
ç”¨æˆ·æ—…ç¨‹ï¼š
1. è¿æ¥é’±åŒ… â†’ 2. é€‰æ‹©è·¯çº¿ â†’ 3. æ¢ç´¢æ‰“å¡(3-4ä¸ªPOI) â†’ 4. è·å¾—NFTå¥–åŠ±
```

---

## äºŒã€ç”¨æˆ·ç”»åƒä¸ä½“éªŒè®¾è®¡

### 2.1 ç›®æ ‡ç”¨æˆ·ï¼šWeb3 æ–°æ‰‹è®¿å®¢

**ç”¨æˆ·ç‰¹å¾ï¼š**
- å¯¹åŒºå—é“¾æŠ€æœ¯å¥½å¥‡ä½†ç¼ºä¹æ·±å…¥äº†è§£
- æ‹¥æœ‰æ™ºèƒ½æ‰‹æœºï¼Œç†Ÿæ‚‰åŸºç¡€ App æ“ä½œ
- å¯èƒ½ä»æœªä½¿ç”¨è¿‡åŠ å¯†è´§å¸é’±åŒ…
- ä¸»è¦åŠ¨æœºï¼šè·å¾—ç‹¬ç‰¹ä½“éªŒå’Œæ•°å­—çºªå¿µå“

**ç”¨æˆ·éœ€æ±‚ï¼š**
- âœ… ç®€å•ç›´è§‚çš„æ“ä½œæµç¨‹
- âœ… æ¸…æ™°çš„æ­¥éª¤æŒ‡å¼•å’ŒçŠ¶æ€åé¦ˆ  
- âœ… æ— éœ€é¢„å…ˆå­¦ä¹ åŒºå—é“¾çŸ¥è¯†
- âœ… æœ‰å½¢çš„å¥–åŠ±å’Œæˆå°±æ„Ÿ

### 2.2 æ ¸å¿ƒä½¿ç”¨æµç¨‹

#### 2.2.1 é¦–æ¬¡ä½¿ç”¨æµç¨‹
```
1. è®¿é—® dApp
2. æµè§ˆå¯ç”¨è·¯çº¿
3. è¿æ¥é’±åŒ…ï¼ˆç®€å•æ•™ç¨‹å¼•å¯¼ï¼‰
4. å¼€å§‹ç¬¬ä¸€æ¡è·¯çº¿æ¢ç´¢
5. å®Œæˆ3-4ä¸ªPOIæ‰“å¡
6. è‡ªåŠ¨è·å¾—è·¯çº¿å®ŒæˆNFT
7. åœ¨æˆå°±é¡µé¢æŸ¥çœ‹NFTæ”¶è—
```

#### 2.2.2 æ‰“å¡è§„åˆ™è®¾è®¡
- **æ¯æ¡è·¯çº¿åŒ…å« 3-4 ä¸ª POIï¼ˆå…´è¶£ç‚¹ï¼‰**
- **å®Œæˆæ‰€æœ‰ POI åè‡ªåŠ¨é“¸é€  1 æšè·¯çº¿çºªå¿µ NFT**
- **æ”¯æŒæ–­ç‚¹ç»­ç©**ï¼šç”¨æˆ·å¯å¤šæ¬¡è®¿é—®å®Œæˆè·¯çº¿
- **é˜²ä½œå¼Šæœºåˆ¶**ï¼šåœ°ç†ä½ç½®éªŒè¯ + ä»»åŠ¡å®Œæˆè¯æ˜

### 2.3 é¡µé¢è®¾è®¡ä¸ç”¨æˆ·ä½“éªŒ

#### 2.3.1 è®¾è®¡ç³»ç»Ÿ

**è®¾è®¡åŸåˆ™ï¼š**
- **æ–°æ‰‹å‹å¥½**ï¼šæ‰€æœ‰æ“ä½œéƒ½æœ‰æ˜ç¡®å¼•å¯¼
- **ç§»åŠ¨ä¼˜å…ˆ**ï¼šå……åˆ†è€ƒè™‘æˆ·å¤–ä½¿ç”¨åœºæ™¯
- **çŠ¶æ€é€æ˜**ï¼šæ¸…æ™°å±•ç¤ºè¿›åº¦å’Œä¸‹ä¸€æ­¥
- **å³æ—¶åé¦ˆ**ï¼šæ¯ä¸ªæ“ä½œéƒ½æœ‰è§†è§‰åé¦ˆ

**è§†è§‰é£æ ¼ï¼š**
```
è‰²å½©ä½“ç³»ï¼š
- ä¸»è‰²ï¼š#4A90E2 (ç§‘æŠ€è“)
- è¾…åŠ©è‰²ï¼š#34C759 (ç”Ÿæ€ç»¿) 
- å¼ºè°ƒè‰²ï¼š#FF9500 (æ´»åŠ›æ©™)
- ä¸­æ€§è‰²ï¼šF2F2F7, 8E8E93, 1C1C1E

å­—ä½“ç³»ç»Ÿï¼š
- ä¸»å­—ä½“ï¼šInter (ç°ä»£æ˜“è¯»)
- ä»£ç å­—ä½“ï¼šSF Mono (æŠ€æœ¯æ„Ÿ)
```

#### 2.3.2 é¦–é¡µ / è·¯çº¿å¤§å…

**è®¾è®¡ç›®æ ‡ï¼š** å¸å¼•ç”¨æˆ·å¼€å§‹æ¢ç´¢ï¼Œå±•ç¤ºå¯ç”¨è·¯çº¿

**å¸ƒå±€ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¼èˆªæ  [Logo] [è¿æ¥é’±åŒ…]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ¬¢è¿æ¨ªå¹…                            â”‚
â”‚ "æ¢ç´¢ç®­å¡”æ‘ï¼Œæ”¶è·æ•°å­—çºªå¿µå“"        â”‚
â”‚ [ç«‹å³å¼€å§‹]                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æˆ‘çš„è¿›åº¦ (ç™»å½•åæ˜¾ç¤º)                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ”„ è¿›è¡Œä¸­ï¼šæ–‡åŒ–æ¢ç´¢è·¯çº¿ (2/4)   â”‚ â”‚
â”‚ â”‚ â¸ï¸  æœªå¼€å§‹ï¼šç”Ÿæ€æœå›­è·¯çº¿        â”‚ â”‚
â”‚ â”‚ âœ… å·²å®Œæˆï¼šç¾é£Ÿä½“éªŒè·¯çº¿         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ¨èè·¯çº¿                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”            â”‚
â”‚ â”‚æ–‡åŒ– â”‚ â”‚ç”Ÿæ€ â”‚ â”‚ç¾é£Ÿ â”‚            â”‚
â”‚ â”‚æ¢ç´¢ â”‚ â”‚æœå›­ â”‚ â”‚ä½“éªŒ â”‚            â”‚
â”‚ â”‚è·¯çº¿ â”‚ â”‚è·¯çº¿ â”‚ â”‚è·¯çº¿ â”‚            â”‚
â”‚ â”‚3ä¸ªç‚¹â”‚ â”‚4ä¸ªç‚¹â”‚ â”‚3ä¸ªç‚¹â”‚            â”‚
â”‚ â”‚    â”‚ â”‚    â”‚ â”‚    â”‚            â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è·¯çº¿å¡ç‰‡è®¾è®¡ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   [è·¯çº¿å°é¢å›¾]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ–‡åŒ–æ¢ç´¢è·¯çº¿     â”‚
â”‚ â˜…â˜…â˜…â˜†â˜† ä¸­ç­‰éš¾åº¦  â”‚
â”‚ â± é¢„è®¡60åˆ†é’Ÿ     â”‚
â”‚ ğŸ¯ 3ä¸ªæ‰“å¡ç‚¹     â”‚
â”‚ ğŸ å®Œæˆå¾—NFT     â”‚
â”‚ [å¼€å§‹æ¢ç´¢]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.3.3 è·¯çº¿è¯¦æƒ…é¡µ

**è®¾è®¡ç›®æ ‡ï¼š** å±•ç¤ºè·¯çº¿å…¨è²Œï¼Œå¼•å¯¼ç”¨æˆ·å¼€å§‹æ¢ç´¢

**å¸ƒå±€ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¼èˆªæ  [è¿”å›] [è·¯çº¿åç§°] [åˆ†äº«]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è·¯çº¿å°é¢ + åŸºæœ¬ä¿¡æ¯                 â”‚
â”‚ "æ–‡åŒ–æ¢ç´¢è·¯çº¿" â˜…â˜…â˜…â˜†â˜†              â”‚
â”‚ æ¢ç´¢ç®­å¡”æ‘çš„å†å²æ–‡åŒ–å®è—            â”‚
â”‚ â± 60åˆ†é’Ÿ Â· ğŸ¯ 3ä¸ªç‚¹ Â· ğŸ NFTå¥–åŠ±  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ äº¤äº’å¼åœ°å›¾                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  â—1    â—2    â—3                â”‚ â”‚
â”‚ â”‚  å¤ç®­å¡” ä¼ ç»Ÿæ°‘å±… è§‚æ™¯å°         â”‚ â”‚
â”‚ â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’             â”‚ â”‚
â”‚ â”‚  è·¯çº¿è½¨è¿¹è¿æ¥æ‰€æœ‰POI            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ‰“å¡ç‚¹åˆ—è¡¨                          â”‚
â”‚ âœ… 1. å¤ç®­å¡” (å·²å®Œæˆ)              â”‚
â”‚    ğŸ“ æ˜ä»£å¤å»ºç­‘ Â· ğŸ“· æ‹ç…§ä»»åŠ¡    â”‚
â”‚    
â”‚ ğŸ”„ 2. ä¼ ç»Ÿæ°‘å±… (è¿›è¡Œä¸­)            â”‚
â”‚    ğŸ“ å·è¥¿ç‰¹è‰² Â· â“ çŸ¥è¯†é—®ç­”      â”‚
â”‚    [ç«‹å³æ‰“å¡]                      â”‚
â”‚    
â”‚ â¸ï¸  3. è§‚æ™¯å° (æœªå¼€å§‹)             â”‚
â”‚    ğŸ“ å…¨æ™¯è§†é‡ Â· ğŸ“ æ–‡å­—è®°å½•      â”‚
â”‚    
â”‚ ğŸ å®Œæˆå¥–åŠ±ï¼šç®­å¡”æ‘æ¢ç´¢è€…NFT       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.3.4 æ‰“å¡é¡µé¢

**è®¾è®¡ç›®æ ‡ï¼š** ç®€åŒ–æ‰“å¡æµç¨‹ï¼Œç¡®ä¿ä»»åŠ¡å®Œæˆè´¨é‡

**çŠ¶æ€æµç¨‹ï¼š**
```
é¡µé¢çŠ¶æ€1ï¼šä½ç½®éªŒè¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¤ç®­å¡”æ‰“å¡                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ ä½ç½®æ£€æµ‹ä¸­...                    â”‚
â”‚ è¯·ç¡®ä¿å·²å¼€å¯å®šä½æƒé™                â”‚
â”‚                                     â”‚
â”‚ âœ… ä½ç½®éªŒè¯æˆåŠŸï¼                   â”‚
â”‚ è·ç¦»ç›®æ ‡ï¼š15ç±³ âœ“                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ä¸‹ä¸€æ­¥ï¼šå®Œæˆä»»åŠ¡]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é¡µé¢çŠ¶æ€2ï¼šä»»åŠ¡å®Œæˆ  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»»åŠ¡ï¼šæ‹æ‘„å¤ç®­å¡”ç…§ç‰‡                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ‹ç…§åŒºåŸŸ                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚        [ç‚¹å‡»æ‹ç…§]               â”‚ â”‚
â”‚ â”‚  æˆ–ä»ç›¸å†Œé€‰æ‹©ç…§ç‰‡                â”‚ â”‚
â”‚ â”‚                                 â”‚ â”‚
â”‚ â”‚  ğŸ“· [æ‹ç…§]  ğŸ–¼ï¸ [ç›¸å†Œ]          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ æ‹ç…§æç¤ºï¼šè¯·ç¡®ä¿ç®­å¡”åœ¨ç”»é¢ä¸­         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ä¸‹ä¸€æ­¥ï¼šç¡®è®¤æäº¤]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é¡µé¢çŠ¶æ€3ï¼šé’±åŒ…ç­¾å
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¡®è®¤æ‰“å¡ä¿¡æ¯                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ‰“å¡ç‚¹ï¼šå¤ç®­å¡”                       â”‚
â”‚ æ—¶é—´ï¼š2025-10-01 14:30              â”‚
â”‚ ä»»åŠ¡ï¼šç…§ç‰‡æ‰“å¡ âœ“                     â”‚
â”‚                                     â”‚
â”‚ ğŸ”’ éœ€è¦é’±åŒ…ç­¾åç¡®è®¤                  â”‚
â”‚ è¿™æ˜¯æ‚¨çš„èº«ä»½è¯æ˜ï¼Œæ— éœ€æ”¯ä»˜è´¹ç”¨       â”‚
â”‚                                     â”‚
â”‚ [è¿æ¥é’±åŒ…å¹¶ç­¾å]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é¡µé¢çŠ¶æ€4ï¼šæäº¤æˆåŠŸ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… æ‰“å¡æˆåŠŸï¼                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¤ç®­å¡” Â· ç…§ç‰‡æ‰“å¡                    â”‚
â”‚ 2025-10-01 14:30                    â”‚
â”‚                                     â”‚
â”‚ è¿›åº¦ï¼š2/3 å®Œæˆ                       â”‚
â”‚ å†å®Œæˆ1ä¸ªç‚¹å³å¯è·å¾—NFTï¼             â”‚
â”‚                                     â”‚
â”‚ [æŸ¥çœ‹è·¯çº¿] [ç»§ç»­æ¢ç´¢]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.3.5 æˆå°±å±•ç¤ºé¡µ

**è®¾è®¡ç›®æ ‡ï¼š** å±•ç¤ºç”¨æˆ·æˆå°±ï¼Œæ¿€åŠ±ç»§ç»­æ¢ç´¢

**å¸ƒå±€ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¼èˆªæ  [æˆ‘çš„æˆå°±] [ç­›é€‰]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç”¨æˆ·æ¦‚è§ˆ                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚        [ç”¨æˆ·å¤´åƒ]               â”‚ â”‚
â”‚ â”‚      æ¢ç´¢è€…ç§°å·                 â”‚ â”‚
â”‚ â”‚ å·²å®Œæˆ 2 æ¡è·¯çº¿ Â· è·å¾— 2 ä¸ªNFT  â”‚ â”‚
â”‚ â”‚ [åˆ†äº«æˆå°±]                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NFTæ”¶è—é¦†                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”            â”‚
â”‚ â”‚NFT1 â”‚ â”‚NFT2 â”‚ â”‚  +  â”‚            â”‚
â”‚ â”‚æ–‡åŒ– â”‚ â”‚ç”Ÿæ€ â”‚ â”‚ç»§ç»­ â”‚            â”‚
â”‚ â”‚æ¢ç´¢ â”‚ â”‚æœå›­ â”‚ â”‚æ¢ç´¢ â”‚            â”‚
â”‚ â”‚     â”‚ â”‚     â”‚ â”‚     â”‚            â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è·¯çº¿æˆå°±                            â”‚
â”‚ âœ… æ–‡åŒ–æ¢ç´¢è·¯çº¿ Â· 2025.10.01       â”‚
â”‚ âœ… ç”Ÿæ€æœå›­è·¯çº¿ Â· 2025.10.02       â”‚
â”‚ â³ ç¾é£Ÿä½“éªŒè·¯çº¿ Â· è¿›è¡Œä¸­ (1/3)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**NFTå¡ç‰‡è®¾è®¡ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   [NFTå›¾ç‰‡]     â”‚
â”‚                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç®­å¡”æ‘æ¢ç´¢è€… #1  â”‚
â”‚ æ–‡åŒ–æ¢ç´¢è·¯çº¿     â”‚
â”‚ 2025.10.01      â”‚
â”‚ ğŸ” æŸ¥çœ‹è¯¦æƒ…      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.3.6 é’±åŒ…è¿æ¥å¼•å¯¼

**è®¾è®¡ç›®æ ‡ï¼š** å¸®åŠ©Web3æ–°æ‰‹é¡ºåˆ©å®Œæˆé’±åŒ…è¿æ¥

**æµç¨‹è®¾è®¡ï¼š**
```
æ­¥éª¤1ï¼šä»‹ç»é’±åŒ…æ¦‚å¿µ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿æ¥æ•°å­—é’±åŒ…                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é’±åŒ…æ˜¯æ‚¨åœ¨Web3ä¸–ç•Œçš„èº«ä»½è¯          â”‚
â”‚                                     â”‚
â”‚ âœ… è¯æ˜æ‚¨çš„èº«ä»½                     â”‚
â”‚ âœ… å®‰å…¨ä¿å­˜æ•°å­—èµ„äº§                 â”‚
â”‚ âœ… æ— éœ€é‡å¤æ³¨å†Œè´¦å·                 â”‚
â”‚                                     â”‚
â”‚ [äº†è§£æ›´å¤š] [å¼€å§‹è¿æ¥]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤2ï¼šé€‰æ‹©é’±åŒ…ç±»å‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é€‰æ‹©é’±åŒ…ç±»å‹                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ¨èé€‰æ‹©ï¼š                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ MetaMask                        â”‚ â”‚
â”‚ â”‚ æœ€æµè¡Œçš„Web3é’±åŒ…                 â”‚ â”‚
â”‚ â”‚ [é€‰æ‹©]                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ å…¶ä»–é€‰é¡¹ï¼š                          â”‚
â”‚ Â· Trust Wallet Â· Rainbow Â· ...     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤3ï¼šå®‰è£…æŒ‡å¼•ï¼ˆå¦‚æœªæ£€æµ‹åˆ°é’±åŒ…ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®‰è£…MetaMask                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. åœ¨åº”ç”¨å•†åº—æœç´¢"MetaMask"         â”‚
â”‚ 2. ä¸‹è½½å¹¶åˆ›å»ºé’±åŒ…                    â”‚
â”‚ 3. å¦¥å–„ä¿ç®¡åŠ©è®°è¯                   â”‚
â”‚ 4. è¿”å›æ­¤é¡µé¢é‡æ–°è¿æ¥               â”‚
â”‚                                     â”‚
â”‚ [æˆ‘å·²å®‰è£…] [éœ€è¦å¸®åŠ©]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€æŠ€æœ¯æ¶æ„ä¸å®ç°

### 3.1 ç³»ç»Ÿæ¶æ„æ€»è§ˆ

```
å‰ç«¯å±‚ (Next.js 15 + React 19)
    â†“
APIå±‚ (Next.js API Routes + JSON-RPC)
    â†“
ä¸šåŠ¡å±‚ (æ‰“å¡é€»è¾‘ + ç­¾åéªŒè¯ + NFTé“¸é€ )
    â†“
æ•°æ®å±‚ (PostgreSQL + æœ¬åœ°æ–‡ä»¶å­˜å‚¨)
    â†“
åŒºå—é“¾å±‚ (Polkadot REVM + æ™ºèƒ½åˆçº¦)
```

### 3.2 æ ¸å¿ƒæŠ€æœ¯æ ˆ

**å‰ç«¯æŠ€æœ¯æ ˆï¼š**
- Next.js 15 (App Router)
- React 19 + TypeScript
- Tailwind CSS + shadcn/ui
- wagmi v2 + viem v2 (Web3äº¤äº’)

**åç«¯æŠ€æœ¯æ ˆï¼š**
- Next.js API Routes
- Prisma ORM (æ•°æ®åº“)
- BullMQ (ä»»åŠ¡é˜Ÿåˆ—)
- JWT + é’±åŒ…ç­¾åè®¤è¯

**åŒºå—é“¾æŠ€æœ¯æ ˆï¼š**
- Polkadot Westendæµ‹è¯•ç½‘ (REVMå…¼å®¹)
- Solidityæ™ºèƒ½åˆçº¦
- Hardhatå¼€å‘æ¡†æ¶

---

## å››ã€ä¸šåŠ¡é€»è¾‘ä¸è§„åˆ™

### 4.1 æ‰“å¡è§„åˆ™è®¾è®¡

**POIï¼ˆå…´è¶£ç‚¹ï¼‰é…ç½®ï¼š**
- æ¯æ¡è·¯çº¿åŒ…å« **3-4ä¸ªPOI**
- æ¯ä¸ªPOIè®¾ç½®æœ‰æ•ˆæ‰“å¡åŠå¾„ï¼ˆ50-100ç±³ï¼‰
- æ”¯æŒå¤šç§ä»»åŠ¡ç±»å‹ï¼šæ‹ç…§ã€é—®ç­”ã€æ–‡å­—è®°å½•
- ä»»åŠ¡éš¾åº¦é€æ­¥é€’å¢ï¼Œå¼•å¯¼æ·±åº¦æ¢ç´¢

**å®Œæˆæ¡ä»¶ï¼š**
- å¿…é¡»æŒ‰é¡ºåºå®Œæˆæ‰€æœ‰POIæ‰“å¡
- æ¯ä¸ªPOIéœ€å®ŒæˆæŒ‡å®šä»»åŠ¡å¹¶é€šè¿‡éªŒè¯
- æ”¯æŒæ–­ç‚¹ç»­ç©ï¼Œè¿›åº¦è‡ªåŠ¨ä¿å­˜
- å®Œæˆæ‰€æœ‰POIåè‡ªåŠ¨è§¦å‘NFTé“¸é€ 

### 4.2 NFTå¥–åŠ±æœºåˆ¶

**é“¸é€ è§„åˆ™ï¼š**
- å®Œæˆ**æ•´æ¡è·¯çº¿**ï¼ˆ3-4ä¸ªPOIï¼‰åé“¸é€ 1æšNFT
- NFTå…ƒæ•°æ®åŒ…å«è·¯çº¿ä¿¡æ¯å’Œå®Œæˆæ—¶é—´
- æ”¯æŒç¨€æœ‰åº¦è®¾å®šï¼ˆæ ¹æ®å®Œæˆæ—¶é—´/ä»»åŠ¡å®Œæˆåº¦ï¼‰
- åŒä¸€è·¯çº¿åªèƒ½è·å¾—ä¸€æ¬¡NFTå¥–åŠ±

**æŠ€æœ¯å®ç°æµç¨‹ï¼š**
```typescript
// è·¯çº¿å®Œæˆæ£€æµ‹
async function checkRouteCompletion(userId: string, routeId: string) {
  const completedPOIs = await prisma.checkin.count({
    where: { 
      userId, 
      routeId,
      status: 'approved'
    }
  });
  
  const totalPOIs = await prisma.pOI.count({
    where: { routeId }
  });
  
  return completedPOIs === totalPOIs;
}

// NFTè‡ªåŠ¨é“¸é€ è§¦å‘
async function triggerNFTReward(userId: string, routeId: string) {
  const voucher = await prisma.voucher.create({
    data: {
      userId,
      routeId,
      status: 'pending'
    }
  });
  
  // åŠ å…¥é“¸é€ é˜Ÿåˆ—
  await mintQueue.add('mint-nft', { voucherId: voucher.id });
}
```

**NFTå±æ€§è®¾è®¡ï¼š**
```json
{
  "name": "ç®­å¡”æ‘æ¢ç´¢è€… #1",
  "description": "æˆåŠŸå®Œæˆç®­å¡”æ‘æ–‡åŒ–æ¢ç´¢è·¯çº¿çš„æ•°å­—çºªå¿µ",
  "image": "https://.../nft-image.png",
  "attributes": [
    {"trait_type": "è·¯çº¿åç§°", "value": "æ–‡åŒ–æ¢ç´¢è·¯çº¿"},
    {"trait_type": "å®Œæˆæ—¶é—´", "value": "2025-10-01"},
    {"trait_type": "POIæ•°é‡", "value": "3"},
    {"trait_type": "éš¾åº¦ç­‰çº§", "value": "ä¸­ç­‰"},
    {"trait_type": "ç¨€æœ‰åº¦", "value": "æ™®é€š"}
  ]
}
```

---

## äº”ã€APIæ¥å£è®¾è®¡

### 5.1 æ¥å£è§„èŒƒ

**åŸºç¡€ä¿¡æ¯ï¼š**
- **Base URL**: `https://api.arrowtower.app/v1`
- **è®¤è¯æ–¹å¼**: Wallet Signature
- **æ•°æ®æ ¼å¼**: JSON
- **ç¼–ç **: UTF-8

**é€šç”¨å“åº”æ ¼å¼ï¼š**
```typescript
interface BaseResponse<T = any> {
  success: boolean;
  data?: T;
  error?: {
    code: string;
    message: string;
    details?: any;
  };
  timestamp: string;
}
```

### 5.2 è®¤è¯æ¥å£

#### 5.2.1 è·å–ç­¾åNonce
**POST /api/auth/nonce**

è¯·æ±‚ï¼š
```json
{
  "walletAddress": "0x742d35Cc6634C0532925a3b8D6B3981d6F2F4a5a",
  "walletType": "evm"
}
```

å“åº”ï¼š
```json
{
  "success": true,
  "data": {
    "nonce": "a1b2c3d4e5f67890",
    "message": "ArrowTower Login: nonce=a1b2c3d4e5f67890, issuedAt=2025-10-01T12:00:00Z",
    "expiresAt": "2025-10-01T12:05:00Z"
  },
  "timestamp": "2025-10-01T12:00:00Z"
}
```

#### 5.2.2 éªŒè¯ç­¾å
**POST /api/auth/verify**

è¯·æ±‚ï¼š
```json
{
  "walletAddress": "0x742d35Cc6634C0532925a3b8D6B3981d6F2F4a5a",
  "signature": "0x1234567890abcdef...",
  "message": "ArrowTower Login: nonce=a1b2c3d4e5f67890, issuedAt=2025-10-01T12:00:00Z"
}
```

å“åº”ï¼š
```json
{
  "success": true,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": "user_123",
      "walletAddress": "0x742d35Cc6634C0532925a3b8D6B3981d6F2F4a5a",
      "nickname": "æ¢ç´¢è€…",
      "totalRoutes": 2
    }
  },
  "timestamp": "2025-10-01T12:00:05Z"
}
```

### 5.3 è·¯çº¿æ¥å£

#### 5.3.1 è·å–è·¯çº¿åˆ—è¡¨
**GET /api/routes**

æŸ¥è¯¢å‚æ•°ï¼š
```typescript
{
  page?: number;      // é¡µç ï¼Œé»˜è®¤1
  limit?: number;     // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10
  difficulty?: string; // éš¾åº¦è¿‡æ»¤
  isActive?: boolean; // æ˜¯å¦æ¿€æ´»
}
```

å“åº”ï¼š
```json
{
  "success": true,
  "data": {
    "routes": [
      {
        "id": "route_001",
        "name": "æ–‡åŒ–æ¢ç´¢è·¯çº¿",
        "description": "æ¢ç´¢ç®­å¡”æ‘çš„å†å²æ–‡åŒ–å®è—",
        "coverImage": "/assets/routes/culture.jpg",
        "difficulty": "medium",
        "estimatedTime": 60,
        "poiCount": 3,
        "isActive": true,
        "userProgress": {
          "completedPOIs": 2,
          "status": "in_progress" // not_started, in_progress, completed
        }
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 10,
      "total": 15,
      "pages": 2
    }
  },
  "timestamp": "2025-10-01T12:00:10Z"
}
```

#### 5.3.2 è·å–è·¯çº¿è¯¦æƒ…
**GET /api/routes/{routeId}**

å“åº”ï¼š
```json
{
  "success": true,
  "data": {
    "id": "route_001",
    "name": "æ–‡åŒ–æ¢ç´¢è·¯çº¿",
    "description": "æ¢ç´¢ç®­å¡”æ‘çš„å†å²æ–‡åŒ–å®è—",
    "coverImage": "/assets/routes/culture.jpg",
    "difficulty": "medium",
    "estimatedTime": 60,
    "nftReward": {
      "name": "ç®­å¡”æ‘æ¢ç´¢è€… NFT",
      "description": "å®Œæˆæ–‡åŒ–æ¢ç´¢è·¯çº¿çš„æ•°å­—çºªå¿µå“"
    },
    "pois": [
      {
        "id": "poi_001",
        "name": "å¤ç®­å¡”",
        "description": "æ˜ä»£å¤å»ºç­‘ï¼Œç®­å¡”æ‘åœ°æ ‡",
        "latitude": 30.123456,
        "longitude": 103.456789,
        "radius": 50,
        "taskType": "photo",
        "taskContent": {
          "instruction": "è¯·æ‹æ‘„å¤ç®­å¡”ç…§ç‰‡",
          "hint": "ç¡®ä¿ç®­å¡”ä¸»ä½“åœ¨ç”»é¢ä¸­"
        },
        "order": 1,
        "userStatus": "completed" // not_started, available, completed
      },
      {
        "id": "poi_002",
        "name": "ä¼ ç»Ÿæ°‘å±…",
        "description": "å·è¥¿ç‰¹è‰²ä¼ ç»Ÿå»ºç­‘",
        "latitude": 30.123567,
        "longitude": 103.456890,
        "radius": 50,
        "taskType": "quiz",
        "taskContent": {
          "question": "å·è¥¿æ°‘å±…çš„ä¸»è¦ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ",
          "options": ["A. é’ç“¦ç™½å¢™", "B. å››åˆé™¢", "C. åŠè„šæ¥¼", "D. åœŸæ¥¼"],
          "answer": "A"
        },
        "order": 2,
        "userStatus": "available"
      }
    ]
  },
  "timestamp": "2025-10-01T12:00:15Z"
}
```

### 5.4 æ‰“å¡æ¥å£

#### 5.4.1 æäº¤æ‰“å¡
**POST /api/checkins**

è¯·æ±‚ï¼š
```json
{
  "routeId": "route_001",
  "poiId": "poi_002",
  "walletAddress": "0x742d35Cc6634C0532925a3b8D6B3981d6F2F4a5a",
  "signature": "0x1234567890abcdef...",
  "message": "ArrowTower Checkin: poi=poi_002, nonce=xyz123...",
  "location": {
    "latitude": 30.123567,
    "longitude": 103.456890,
    "accuracy": 12.5,
    "timestamp": "2025-10-01T12:30:00Z"
  },
  "taskData": {
    "type": "quiz",
    "answer": "A",
    "photoUrl": "/uploads/checkin_123_photo.jpg" // å¯é€‰ï¼Œæ‹ç…§ä»»åŠ¡æ—¶æä¾›
  },
  "deviceInfo": {
    "fingerprint": "device_fp_123",
    "userAgent": "Mozilla/5.0..."
  }
}
```

å“åº”ï¼š
```json
{
  "success": true,
  "data": {
    "checkinId": "checkin_123",
    "status": "approved", // pending, approved, rejected, flagged
    "poi": {
      "id": "poi_002",
      "name": "ä¼ ç»Ÿæ°‘å±…",
      "order": 2
    },
    "routeProgress": {
      "completed": 2,
      "total": 3,
      "nextPOI": "poi_003",
      "isRouteCompleted": false
    },
    "nftStatus": {
      "willMint": false, // æœ¬æ¬¡æ‰“å¡ä¸ä¼šè§¦å‘NFTé“¸é€ 
      "remainingPOIs": 1
    },
    "timestamp": "2025-10-01T12:30:05Z"
  },
  "timestamp": "2025-10-01T12:30:05Z"
}
```

#### 5.4.2 ä¸Šä¼ æ‰“å¡ç…§ç‰‡
**POST /api/upload/photo**

è¯·æ±‚ (multipart/form-data)ï¼š
```typescript
{
  file: File;           // å›¾ç‰‡æ–‡ä»¶
  checkinId: string;    // æ‰“å¡è®°å½•ID
  poiId: string;        // POI ID
}
```

å“åº”ï¼š
```json
{
  "success": true,
  "data": {
    "url": "/uploads/checkin_123_photo.jpg",
    "filename": "checkin_123_photo.jpg",
    "size": 2048576,
    "mimeType": "image/jpeg"
  },
  "timestamp": "2025-10-01T12:29:50Z"
}
```

#### 5.4.3 è·å–æ‰“å¡è®°å½•
**GET /api/checkins**

æŸ¥è¯¢å‚æ•°ï¼š
```typescript
{
  routeId?: string;
  poiId?: string;
  status?: string;
  page?: number;
  limit?: number;
}
```

å“åº”ï¼š
```json
{
  "success": true,
  "data": {
    "checkins": [
      {
        "id": "checkin_123",
        "poi": {
          "id": "poi_002",
          "name": "ä¼ ç»Ÿæ°‘å±…",
          "order": 2
        },
        "route": {
          "id": "route_001",
          "name": "æ–‡åŒ–æ¢ç´¢è·¯çº¿"
        },
        "status": "approved",
        "taskData": {
          "type": "quiz",
          "answer": "A",
          "correct": true
        },
        "location": {
          "latitude": 30.123567,
          "longitude": 103.456890,
          "distance": 15.2
        },
        "createdAt": "2025-10-01T12:30:00Z"
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 20,
      "total": 45,
      "pages": 3
    }
  },
  "timestamp": "2025-10-01T12:35:00Z"
}
```

### 5.5 NFTç›¸å…³æ¥å£

#### 5.5.1 è·å–ç”¨æˆ·NFT
**GET /api/nfts**

æŸ¥è¯¢å‚æ•°ï¼š
```typescript
{
  walletAddress: string;
  page?: number;
  limit?: number;
}
```

å“åº”ï¼š
```json
{
  "success": true,
  "data": {
    "nfts": [
      {
        "id": "nft_001",
        "tokenId": "1",
        "name": "ç®­å¡”æ‘æ¢ç´¢è€… #1",
        "description": "å®Œæˆæ–‡åŒ–æ¢ç´¢è·¯çº¿çš„æ•°å­—çºªå¿µ",
        "image": "/api/metadata/nft_001/image",
        "metadata": "/api/metadata/nft_001",
        "route": {
          "id": "route_001",
          "name": "æ–‡åŒ–æ¢ç´¢è·¯çº¿"
        },
        "chain": "polkadot-revm",
        "txHash": "0x789abcdef0123456789...",
        "mintedAt": "2025-10-01T12:35:00Z",
        "attributes": [
          {
            "trait_type": "è·¯çº¿åç§°",
            "value": "æ–‡åŒ–æ¢ç´¢è·¯çº¿"
          },
          {
            "trait_type": "å®Œæˆæ—¶é—´", 
            "value": "2025-10-01"
          },
          {
            "trait_type": "POIæ•°é‡",
            "value": "3"
          }
        ]
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 10,
      "total": 5,
      "pages": 1
    }
  },
  "timestamp": "2025-10-01T12:40:00Z"
}
```

#### 5.5.2 è·å–NFTå…ƒæ•°æ®
**GET /api/metadata/{nftId}**

å“åº”ï¼š
```json
{
  "name": "ç®­å¡”æ‘æ¢ç´¢è€… #1",
  "description": "æˆåŠŸå®Œæˆç®­å¡”æ‘æ–‡åŒ–æ¢ç´¢è·¯çº¿çš„æ•°å­—çºªå¿µ",
  "image": "https://api.arrowtower.app/api/metadata/nft_001/image",
  "external_url": "https://arrowtower.app/achievements/nft_001",
  "attributes": [
    {
      "trait_type": "è·¯çº¿åç§°",
      "value": "æ–‡åŒ–æ¢ç´¢è·¯çº¿"
    },
    {
      "trait_type": "å®Œæˆæ—¶é—´",
      "value": "2025-10-01"
    },
    {
      "trait_type": "POIæ•°é‡", 
      "value": "3"
    },
    {
      "trait_type": "éš¾åº¦ç­‰çº§",
      "value": "ä¸­ç­‰"
    },
    {
      "trait_type": "æ¢ç´¢è¯„åˆ†",
      "value": "95"
    }
  ],
  "background_color": "4A90E2"
}
```

#### 5.5.3 è·å–é“¸é€ çŠ¶æ€
**GET /api/vouchers/{voucherId}**

å“åº”ï¼š
```json
{
  "success": true,
  "data": {
    "id": "voucher_123",
    "route": {
      "id": "route_001",
      "name": "æ–‡åŒ–æ¢ç´¢è·¯çº¿"
    },
    "status": "minted", // pending, minting, minted, failed
    "nft": {
      "tokenId": "1",
      "txHash": "0x789abcdef0123456789...",
      "mintedAt": "2025-10-01T12:35:00Z"
    },
    "createdAt": "2025-10-01T12:30:05Z",
    "updatedAt": "2025-10-01T12:35:00Z"
  },
  "timestamp": "2025-10-01T12:45:00Z"
}
```

### 5.6 ç”¨æˆ·æ•°æ®æ¥å£

#### 5.6.1 è·å–ç”¨æˆ·ç»Ÿè®¡
**GET /api/users/{walletAddress}/stats**

å“åº”ï¼š
```json
{
  "success": true,
  "data": {
    "user": {
      "walletAddress": "0x742d35Cc6634C0532925a3b8D6B3981d6F2F4a5a",
      "nickname": "æ¢ç´¢è€…",
      "joinedAt": "2025-10-01T10:00:00Z"
    },
    "stats": {
      "totalCheckins": 12,
      "completedRoutes": 4,
      "totalNFTs": 4,
      "explorationScore": 85,
      "rank": "èµ„æ·±æ¢ç´¢è€…"
    },
    "recentActivity": [
      {
        "type": "nft_minted",
        "routeName": "æ–‡åŒ–æ¢ç´¢è·¯çº¿",
        "timestamp": "2025-10-01T12:35:00Z"
      },
      {
        "type": "checkin",
        "poiName": "ä¼ ç»Ÿæ°‘å±…", 
        "timestamp": "2025-10-01T12:30:00Z"
      }
    ]
  },
  "timestamp": "2025-10-01T12:50:00Z"
}
```

### 5.7 ç®¡ç†æ¥å£

#### 5.7.1 è·å–å¾…å®¡æ ¸æ‰“å¡
**GET /api/admin/checkins/pending**

è¯·æ±‚å¤´ï¼š
```http
Authorization: Bearer {admin_token}
```

å“åº”ï¼š
```json
{
  "success": true,
  "data": {
    "checkins": [
      {
        "id": "checkin_456",
        "user": {
          "walletAddress": "0x123...",
          "previousCheckins": 5
        },
        "poi": {
          "name": "å¤ç®­å¡”",
          "expectedLocation": {
            "latitude": 30.123456,
            "longitude": 103.456789
          }
        },
        "submittedLocation": {
          "latitude": 30.123467,
          "longitude": 103.456800,
          "distance": 15.8,
          "accuracy": 25.0
        },
        "taskData": {
          "type": "photo",
          "photoUrl": "/uploads/checkin_456_photo.jpg"
        },
        "flaggedReasons": ["location_discrepancy"],
        "submittedAt": "2025-10-01T11:30:00Z"
      }
    ]
  },
  "timestamp": "2025-10-01T13:00:00Z"
}
```

#### 5.7.2 å®¡æ ¸æ‰“å¡
**POST /api/admin/checkins/{checkinId}/review**

è¯·æ±‚ï¼š
```json
{
  "action": "approve", // approve, reject
  "reason": "ä½ç½®éªŒè¯é€šè¿‡ï¼Œç…§ç‰‡ç¬¦åˆè¦æ±‚",
  "adminNotes": "ç”¨æˆ·å†å²è®°å½•è‰¯å¥½"
}
```

å“åº”ï¼š
```json
{
  "success": true,
  "data": {
    "checkinId": "checkin_456",
    "newStatus": "approved",
    "routeCompleted": true,
    "nftVoucherCreated": true
  },
  "timestamp": "2025-10-01T13:05:00Z"
}
```

### 5.8 é”™è¯¯å¤„ç†

**é”™è¯¯å“åº”æ ¼å¼ï¼š**
```json
{
  "success": false,
  "error": {
    "code": "LOCATION_OUT_OF_RANGE",
    "message": "æ‚¨è·ç¦»ç›®æ ‡ç‚¹å¤ªè¿œï¼Œè¯·é è¿‘POIåé‡è¯•",
    "details": {
      "requiredRadius": 50,
      "actualDistance": 125.6,
      "poiName": "å¤ç®­å¡”"
    }
  },
  "timestamp": "2025-10-01T12:25:00Z"
}
```

**å¸¸è§é”™è¯¯ç ï¼š**
- `INVALID_SIGNATURE`: ç­¾åéªŒè¯å¤±è´¥
- `LOCATION_OUT_OF_RANGE`: ä½ç½®è¶…å‡ºæœ‰æ•ˆèŒƒå›´
- `POI_ALREADY_COMPLETED`: POIå·²å®Œæˆæ‰“å¡
- `ROUTE_NOT_ACTIVE`: è·¯çº¿æœªæ¿€æ´»
- `WALLET_NOT_CONNECTED`: é’±åŒ…æœªè¿æ¥
- `INSUFFICIENT_PERMISSIONS`: æƒé™ä¸è¶³

---

## å…­ã€æ•°æ®æ¨¡å‹è®¾è®¡

### 6.1 æ ¸å¿ƒæ•°æ®è¡¨

```prisma
// ç”¨æˆ·è¡¨
model User {
  id            String   @id @default(cuid())
  walletAddress String   @unique
  walletType    String   @default("evm")
  nickname      String?
  avatar        String?
  totalRoutes   Int      @default(0)
  createdAt     DateTime @default(now())
  
  checkins Checkin[]
  vouchers Voucher[]
}

// è·¯çº¿è¡¨
model Route {
  id            String   @id @default(cuid())
  name          String
  description   String?
  coverImage    String?
  difficulty    String   @default("medium")
  estimatedTime Int
  poiCount      Int      @default(3)
  nftCollection String?
  isActive      Boolean  @default(true)
  
  pois     POI[]
  checkins Checkin[]
  vouchers Voucher[]
}

// å…´è¶£ç‚¹è¡¨
model POI {
  id          String   @id @default(cuid())
  routeId     String
  name        String
  description String?
  latitude    Float
  longitude   Float
  radius      Int      @default(50)
  taskType    String   @default("photo")
  taskContent Json?
  order       Int
  
  route    Route     @relation(fields: [routeId], references: [id])
  checkins Checkin[]
}

// æ‰“å¡è®°å½•è¡¨
model Checkin {
  id          String   @id @default(cuid())
  userId      String
  routeId     String
  poiId       String
  signature   String
  message     String
  taskData    Json?
  status      String   @default("pending")
  createdAt   DateTime @default(now())
  
  user  User  @relation(fields: [userId], references: [id])
  route Route @relation(fields: [routeId], references: [id])
  poi   POI   @relation(fields: [poiId], references: [id])
}

// NFTå‡­è¯è¡¨
model Voucher {
  id          String   @id @default(cuid())
  userId      String
  routeId     String
  status      String   @default("pending")
  nftTokenId  String?
  mintTxHash  String?
  metadata    Json?
  createdAt   DateTime @default(now())
  
  user  User  @relation(fields: [userId], references: [id])
  route Route @relation(fields: [routeId], references: [id])
}
```

---

## ä¸ƒã€é¡¹ç›®ç›®å½•ç»“æ„(ä¼˜åŒ–ç‰ˆ)

```
arrowtower-dapp/
â”œâ”€ package.json
â”œâ”€ next.config.js
â”œâ”€ tsconfig.json
â”œâ”€ tailwind.config.ts
â”œâ”€ .env.local
â”œâ”€ .env.example
â”œâ”€ README.md
â”‚
â”œâ”€ prisma/
â”‚  â”œâ”€ schema.prisma
â”‚  â”œâ”€ migrations/
â”‚  â””â”€ seed.ts
â”‚
â”œâ”€ contracts/
â”‚  â”œâ”€ ArrowTowerNFT.sol
â”‚  â””â”€ hardhat.config.ts
â”‚
â”œâ”€ scripts/
â”‚  â”œâ”€ deploy.ts
â”‚  â”œâ”€ mint-worker.ts
â”‚  â”œâ”€ metadata-generator.ts
â”‚  â””â”€ faucet-helper.ts
â”‚
â”œâ”€ public/
â”‚  â”œâ”€ uploads/           # ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶
â”‚  â”œâ”€ metadata/          # NFT å…ƒæ•°æ®æ–‡ä»¶
â”‚  â”œâ”€ assets/
â”‚  â”‚  â”œâ”€ maps/           # SVG åœ°å›¾èµ„æº
â”‚  â”‚  â”œâ”€ pois/           # POI å›¾æ ‡èµ„æº
â”‚  â”‚  â””â”€ nfts/           # NFT æ ·ä¾‹å›¾ç‰‡
â”‚  â””â”€ favicon.ico
â”‚
â””â”€ src/
   â”œâ”€ app/
   â”‚  â”œâ”€ layout.tsx
   â”‚  â”œâ”€ page.tsx
   â”‚  â”œâ”€ providers.tsx
   â”‚  â”œâ”€ api/
   â”‚  â”‚  â”œâ”€ auth/
   â”‚  â”‚  â”œâ”€ checkin/
   â”‚  â”‚  â”œâ”€ upload/
   â”‚  â”‚  â”œâ”€ voucher/
   â”‚  â”‚  â”œâ”€ metadata/
   â”‚  â”‚  â””â”€ admin/
   â”‚  â”œâ”€ routes/
   â”‚  â”œâ”€ checkin/
   â”‚  â”œâ”€ achievements/
   â”‚  â”œâ”€ profile/
   â”‚  â””â”€ admin/
   â”‚
   â”œâ”€ components/
   â”‚  â”œâ”€ ui/
   â”‚  â”œâ”€ providers/
   â”‚  â”œâ”€ map/
   â”‚  â”œâ”€ checkin/
   â”‚  â”œâ”€ wallet/
   â”‚  â”œâ”€ nft/
   â”‚  â””â”€ admin/
   â”‚
   â”œâ”€ hooks/
   â”‚  â”œâ”€ useWalletSignature.ts
   â”‚  â”œâ”€ useMintWorker.ts
   â”‚  â”œâ”€ useGeolocation.ts
   â”‚  â”œâ”€ useCheckin.ts
   â”‚  â””â”€ useNFTs.ts
   â”‚
   â”œâ”€ lib/
   â”‚  â”œâ”€ db.ts
   â”‚  â”œâ”€ web3/
   â”‚  â”‚  â”œâ”€ wagmi-config.ts
   â”‚  â”‚  â”œâ”€ polkadot-client.ts
   â”‚  â”‚  â””â”€ signature-verify.ts
   â”‚  â”œâ”€ geolocation.ts
   â”‚  â””â”€ storage.ts        # æœ¬åœ°å­˜å‚¨ç®¡ç†
   â”‚
   â”œâ”€ types/
   â”‚  â”œâ”€ api.ts
   â”‚  â”œâ”€ models.ts
   â”‚  â”œâ”€ web3.ts
   â”‚  â””â”€ nft.ts
   â”‚
   â”œâ”€ utils/
   â”‚  â”œâ”€ distance-calculator.ts
   â”‚  â”œâ”€ qr-generator.ts
   â”‚  â””â”€ metadata-builder.ts
   â”‚
   â””â”€ styles/
      â””â”€ globals.css
```

---

## å…«ã€æ€»ç»“

ArrowTower dApp v1.3 é’ˆå¯¹**Web3æ–°æ‰‹è®¿å®¢**è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼Œé€šè¿‡ç®€åŒ–çš„3-4æ¬¡æ‰“å¡è·å¾—NFTçš„è§„åˆ™è®¾è®¡ï¼Œå¤§å¹…é™ä½äº†ç”¨æˆ·å‚ä¸é—¨æ§›ã€‚é¡µé¢è®¾è®¡å……åˆ†è€ƒè™‘äº†ç§»åŠ¨ç«¯ä½¿ç”¨åœºæ™¯å’Œæ¸è¿›å¼å­¦ä¹ æ›²çº¿ï¼Œç¡®ä¿å³ä½¿å®Œå…¨æ²¡æœ‰åŒºå—é“¾çŸ¥è¯†çš„ç”¨æˆ·ä¹Ÿèƒ½é¡ºåˆ©å®Œæˆæ•´ä¸ªæ¢ç´¢æµç¨‹ã€‚

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**
1. **æç®€ç”¨æˆ·ä½“éªŒ**ï¼šä»è¿æ¥åˆ°è·å¾—NFTä»…éœ€4ä¸ªæ­¥éª¤
2. **é›¶Gasè´¹é—¨æ§›**ï¼šç”¨æˆ·æ— éœ€äº†è§£åŠ å¯†è´§å¸æ¦‚å¿µ
3. **çœŸå®ä»·å€¼åˆ›é€ **ï¼šé“¾ä¸Šæ°¸ä¹…è®°å½•çº¿ä¸‹ä½“éªŒ
4. **æ¡†æ¶åŒ–è®¾è®¡**ï¼šæ”¯æŒå¿«é€Ÿæ‰©å±•åˆ°å…¶ä»–åº”ç”¨åœºæ™¯
5. **æ¸è¿›å¼æ•™è‚²**ï¼šåœ¨å®è·µä¸­å­¦ä¹ Web3åŸºç¡€çŸ¥è¯†

---
